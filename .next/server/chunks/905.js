"use strict";exports.id=905,exports.ids=[905],exports.modules={32078:(e,t,r)=>{r.d(t,{default:()=>p});var a=r(10326),s=r(79404),o=r.n(s);function l({title:e,open:t,setOpen:r,children:s}){return a.jsx("div",{id:"default-modal","aria-hidden":"true",className:t?"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full":"hidden",children:a.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),(0,a.jsxs)("button",{onClick:()=>r(!1),type:"button",className:"text-gray-400 bg-classNameparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[a.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:a.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),a.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),a.jsx("div",{className:"p-4 md:p-5 space-y-4",children:s})]})})})}var d=r(9083),n=r(17577),c=r(53756),i=r(35047);function u(e){let t=(0,i.useRouter)(),r=async()=>{try{let r=await (0,c.qV)(e.id);console.log("res",r),r&&await t.refresh()}catch(e){console.log(e)}};return a.jsx("div",{onClick:()=>r(),"data-modal-target":"default-modal","data-modal-toggle":"default-modal",className:"block text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Remove"})}function p({adminMode:e=!1,...t}){let[r,s]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",children:[a.jsx(o(),{href:`/products/${t.id}`,children:a.jsx("img",{className:" rounded-t-lg w-full h-40 object-cover",src:t.photo,alt:""})}),(0,a.jsxs)("div",{className:"p-5",children:[a.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:t.title}),a.jsx("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:t.description}),a.jsx("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:t.userId}),(0,a.jsxs)(o(),{href:`/products/${t.id}`,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[t.price/100+"$",a.jsx("svg",{className:"rtl:rotate-180 w-3.5 h-3.5 ms-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:a.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})})]}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-1 mt-10",children:[a.jsx("button",{onClick:()=>s(!0),"data-modal-target":"default-modal","data-modal-toggle":"default-modal",className:"w-1/2 block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button",children:"Update"}),a.jsx("div",{className:"w-1/2",children:a.jsx(u,{...t})})]}),a.jsx(l,{open:r,setOpen:s,title:"Update product",children:a.jsx(d.default,{product:t})})]}):""]})]})}},9083:(e,t,r)=>{r.d(t,{default:()=>i});var a=r(10326),s=r(43678),o=r(80264),l=r(53756),d=r(35047);let n="text-gray-900 border-gray-300 dark:border-gray-600 dark:focus:border-blue-500 focus:border-blue-600",c="text-red-900 border-red-300 dark:border-red-600 dark:focus:border-red-500 focus:border-red-600";function i({product:e=null}){let{errors:t,hasErrors:r,setErrors:i,handleChange:u}=(0,s.h)(o.rx),p=(0,d.useRouter)(),f=async t=>{let r=Object.fromEntries(t.entries()),a=await o.rx.safeParseAsync({...r});if(!a.success)return;let s=a.data;({...s});try{let t={...s},r=Object?.entries(e).length!==0&&e?await (0,l.Bj)(e.id||"",t):await (0,l.Q1)(t),a="products/"+r?.id;r&&await p.push(a)}catch(e){console.log(e)}};return(0,a.jsxs)("form",{onChange:u,action:f,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[a.jsx("input",{type:"text",name:"title",id:"floating_email",className:`${t?.title?c:n} block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2  appearance-none dark:text-white  focus:outline-none focus:ring-0  peer`,placeholder:"",defaultValue:e?.title}),a.jsx("label",{htmlFor:"floating_email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"TITLE"})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[a.jsx("input",{type:"text",name:"description",id:"floating_password",className:`${t?.description?c:n} block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2  appearance-none dark:text-white  focus:outline-none focus:ring-0  peer`,placeholder:"",defaultValue:e?.description}),a.jsx("label",{htmlFor:"floating_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"DESCRIPTION"})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[a.jsx("input",{type:"text",name:"price",id:"floating_repeat_password",className:`${t?.price?c:n} block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2  appearance-none dark:text-white  focus:outline-none focus:ring-0  peer`,placeholder:"",defaultValue:e?.price}),a.jsx("label",{htmlFor:"floating_repeat_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"PRICE"})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[a.jsx("input",{type:"text",name:"photo",id:"floating_repeat_password",className:`${t?.photo?c:n} block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2  appearance-none dark:text-white  focus:outline-none focus:ring-0  peer`,placeholder:"",defaultValue:e?.photo}),a.jsx("label",{htmlFor:"floating_repeat_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"PHOTO"})]}),a.jsx("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Submit"})]})}},53756:(e,t,r)=>{r.d(t,{Bj:()=>l,Q1:()=>o,qV:()=>s}),r(15424);var a=r(46242),s=(0,a.$)("13dbf4e2c938841afbd1598f1e30db011919c58c"),o=(0,a.$)("a01cde6a71e9eefe64f8c86234a0e564954ae01e"),l=(0,a.$)("78f752117e0407c9d8dd93304ce655081f977c1d")},56559:(e,t,r)=>{r.d(t,{ZP:()=>d});var a=r(68570);let s=(0,a.createProxy)(String.raw`/Users/developeruvidest/Desktop/next/nextjs_lab1/src/components/Product.tsx`),{__esModule:o,$$typeof:l}=s;s.default;let d=(0,a.createProxy)(String.raw`/Users/developeruvidest/Desktop/next/nextjs_lab1/src/components/Product.tsx#default`)},19794:(e,t,r)=>{r.d(t,{createProduct:()=>s,deleteProduct:()=>o,updateProduct:()=>l});var a=r(1439);let s=async e=>await a.db.product.create({data:e}),o=async e=>await a.db.product.delete({where:{id:e}}),l=async(e,t)=>await a.db.product.update({where:{id:e},data:t})},20300:(e,t,r)=>{r.d(t,{insertProductParams:()=>d});var a=r(89756),s=r(10692),o=r(43778);let l=a.productSchema.omit(o.timestamps);l.omit({id:!0});let d=l.extend({price:s.z.coerce.number()}).omit({id:!0});l.omit({id:!0}).extend({price:s.z.coerce.number()}),l.pick({id:!0})},43778:(e,t,r)=>{r.d(t,{timestamps:()=>a});let a={createdAt:!0,updatedAt:!0}},40378:(e,t,r)=>{r.r(t),r.d(t,{ProductDeleteAction:()=>c,ProductInsertAction:()=>d,ProductUpdateAction:()=>n});var a=r(27745);r(26461);var s=r(20300),o=r(19794),l=r(48137);async function d(e){try{await (0,l.checkAuth)();let t=await (0,l.getUserAuth)();if(!t)return;let r=s.insertProductParams.parse({userId:t.user.id,...e});return await (0,o.createProduct)(r)}catch(e){console.log(e)}}async function n(e,t){try{await (0,l.checkAuth)();let r=await (0,l.getUserAuth)();if(!r)return;let a=s.insertProductParams.parse({userId:r.user.id,...t});return await (0,o.updateProduct)(e,a)}catch(e){console.log(e)}}async function c(e){try{if(await (0,l.checkAuth)(),!await (0,l.getUserAuth)())return;return await (0,o.deleteProduct)(e)}catch(e){console.log(e)}}(0,r(85723).ensureServerEntryExports)([d,n,c]),(0,a.registerServerReference)("a01cde6a71e9eefe64f8c86234a0e564954ae01e",d),(0,a.registerServerReference)("78f752117e0407c9d8dd93304ce655081f977c1d",n),(0,a.registerServerReference)("13dbf4e2c938841afbd1598f1e30db011919c58c",c)}};